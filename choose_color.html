<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Выбрать цвет</title>
    <style>
        .button {
            background-color: #4CAF50; /* Green */
            color: white;
            padding: 15px 32px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 16px;
            margin: 4px 2px;
            cursor: pointer;
            border: solid 2px #4CAF50;

        }

        .button2 {background-color: #008CBA; border-color: #008CBA;} /* Blue */
        .button3 {background-color: #f44336; border-color: #f44336;} /* Red */
        .button4 {background-color: #e7e7e7; color: black; border-color: #e7e7e7;} /* Gray */
        .button5 {background-color: #555555; border-color: #555555;} /* Black */
        .active {background-color: white; color: black;}
    </style>
</head>
<body>
<button class="button" id="GREEN">Green</button>
<button class="button button2" id="BLUE">Blue</button>
<button class="button button3" id="RED">Red</button>
<button class="button button4" id="GRAY_25">Gray</button>
<button class="button button5" id="BLACK">Black</button>

<button id="close" >Подтвердить</button>
<button id="cancel">Отменить</button>

</body>

<script>
  const utils = require('./js_code/utils')
  const constants = require('./js_code/constants_js');
  const fs = require('fs');
  const buttons = document.getElementsByClassName("button")
  const colorsArray = []

  for (let bn of buttons) {
    const button_id = bn.id
    bn.addEventListener("click", function()
    {
      if (this.classList.contains("active"))
      {
        this.classList.remove("active");
        colorsArray.splice(colorsArray.indexOf(button_id), 1)
        console.log(colorsArray)
      } else {
        this.classList.add("active");
        colorsArray.push(button_id)
        console.log(colorsArray)
      }
    });}


  document.getElementById("close").addEventListener("click", function () {

    utils.logToFile('Closing choose color window')
    fs.writeFileSync(`${constants.PATHS.utilsPath}${constants.PATHS.colorsFile}`, colorsArray.toString())
    window.close();
  })
  document.getElementById("cancel").addEventListener("click", function () {

    utils.logToFile('Closing choose color window - cancel')
    if (fs.existsSync(`${constants.PATHS.utilsPath}${constants.PATHS.colorsFile}`)) {
        fs.unlinkSync(`${constants.PATHS.utilsPath}${constants.PATHS.colorsFile}`)}
    window.close();
  })
</script>


</html>