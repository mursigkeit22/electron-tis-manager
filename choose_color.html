<!DOCTYPE html>
<html lang="en" xmlns:>
<head>
    <meta charset="UTF-8">
    <title>Выбрать цвет</title>
    <link rel="stylesheet" href="css/choose_color.css">

</head>
<body>
<div class="color_block">
<button class="button button1 btn" id="YELLOW">YELLOW</button>
<button class="button button2 btn" id="BRIGHT_GREEN">BRIGHT GREEN</button>
<button class="button button3 btn" id="TURQUOISE">TURQUOISE</button>
<button class="button button4" id="PINK">PINK</button>
<button class="button button5" id="BLUE">BLUE</button>
<div class="btn-group" role="group">
<button class="button button6" id="RED">RED</button>
<button class="button button7" id="DARK_BLUE">DARK BLUE</button>
<button class="button button8" id="TEAL">TEAL</button>
<button class="button button9" id="GREEN">GREEN</button>
<button class="button button10" id="VIOLET">VIOLET</button>
</div>
<div class="btn-group" role="group">
<button class="button button11" id="DARK_RED">DARK RED</button>
<button class="button button12" id="DARK_YELLOW">DARK YELLOW</button>
<button class="button button13" id="GRAY_50">GRAY_50</button>
<button class="button button14" id="GRAY_25">GRAY_25</button>
<button class="button button15" id="BLACK">BLACK</button>
</div>
</div>

<button id="close" >Подтвердить</button>
<button id="cancel">Отменить</button>

</body>

<script>
  const utils = require('./js_code/utils')
  const constants = require('./js_code/constants_js')
  const fs = require('fs')
  const buttons = document.getElementsByClassName('button')
  const colorsArray = []

  for (let bn of buttons) {
    const button_id = bn.id
    bn.addEventListener('click', function()
    {
      if (this.classList.contains('active'))
      {
        this.classList.remove('active')
        colorsArray.splice(colorsArray.indexOf(button_id), 1)
        console.log(colorsArray)
      } else {
        this.classList.add('active')
        colorsArray.push(button_id)
        console.log(colorsArray)
      }
    })}


  document.getElementById('close').addEventListener('click', function () {

    utils.logToFile('Closing choose color window')
    fs.writeFileSync(`${constants.PATHS.utilsPath}${constants.PATHS.colorsFile}`, colorsArray.toString())
    window.close()
  })
  document.getElementById('cancel').addEventListener('click', function () {

    utils.logToFile('Closing choose color window - cancel')
    if (fs.existsSync(`${constants.PATHS.utilsPath}${constants.PATHS.colorsFile}`)) {
        fs.unlinkSync(`${constants.PATHS.utilsPath}${constants.PATHS.colorsFile}`)}
    window.close()
  })
</script>


</html>